title: 博客迁移过程记录
tags: 
- python
- http
- 杂谈
category: article
date: 2015-03-20 16:26
---
这个博客一开始是搭在新浪的SAE上的，sae还送了个二级域名[mafagan.sinaapp.com]()，用了一段时间之后觉得这个域名太长了，想换个短一点的，于是就去万网找域名。我一开始想要的域名是[danye.com](http://danye.com)，但是看了下whois信息，这域名在十多年前就被一家卖家具的外国商家买下了，一直用到现在，估计近期放手的几率不大，就看看其它的，后来发现[danye.me](http://danye.me)尚未有主，而且也便宜，一年一百软妹币左右。在网上看看评论，对.me域名几乎是一面倒的好评啊，首先.me域名推出的时间比.com要晚得多，.com域名常用的基本都被注册得七七八八的，.比me域名可选的要少得多。并且.me域名也是国际顶级域名，不输逼格，与.cn相比又没有在天朝特有的烦恼。同时，.me看上去就有一种天然的个人site既视感等等等等，看到这里就不用再考虑了，就是它了。所以就有了你们现在看到的这个域名。

域名选好之后就按照SAE上的文档进行绑定，在设置[danye.me]()进行解析的时候问题来了。万网家的dns解析居然不支持@主机解析，也就是非要加个前缀www什么的，想想要在.me域名前面加个www，真是逼格尽输，果断不能忍。于是把域名的dns服务器换到Dnspod上。这里不得不赞一下dnspod，服务专业还免费。等了大概一两天(需要等待dns服务器的全球同步，最晚是在72小时内)，[danye.me]()这个域名总算是生效了。

现在新的问题又来了，两个域名同时存在对访客确实没什么影响，喜欢哪个就用哪个。但是我还是希望统一用[danye.me]()，一个是我觉得[danye.me]()要好看得多，而且花了钱如果没有起到作用心里总觉得不舒服。第二是两个域名的存在会分摊搜索引擎里的权重比，这也是我最不希望看到的。考虑了下决定把所有对[mafagan.sinaapp.com]()的请求301重定向到[danye.me]()上。在SAE这种地方.htaccess自然是不可用的，谷歌了下，大多数用的是sae上的rewrite方法。我试了几次，都没有起到作用。到社区问了下，原来是我的环境问题。我这个site是个静态博客，所以一开始选环境的时候就随手选的python，而rewrite规则目前只在php环境下有效。想换环境是不可能的，考虑下用wsgi实现。但是无论是tornado、还是Django又或者是其它的python框架，都是讲究逻辑与页面的分离，要把整个静态博客移植上去不仅麻烦而且别扭，关键是还要对SAE做适配。再加上这几个月下来我对SAE的服务是怨念已久，思前想后，我决定还是把博客迁移出SAE。

之前我曾经在枫叶主机上买了个小的主机，加上优惠码总价20块钱半年，真系便到无人有。主机在香港，64m容量，速度还是可以的，做为静态博客也是挺合适的。缺少了SAE的束缚，做事情感觉顺手了许多，上传了源码，改了下dnspod上的解析数据，再到SAE上用tornado做了个匹配所有请求的带参数301重定向，博客的迁移工作基本就完成了。

博客的迁移看起来好像挺简单，但前前后后其实也花了不少的时间，一切弄完之后居然还有点小小的成就感和自在感(估计是和脱离了SAE又一点关系)。

博客现在每天大概是100PV，所以之前有童鞋问我为什么不用阿里云，我当然知道阿里云的主机不错的，只是现在用还是太奢侈了一点，以后有机会的话应该也会迁移到那里去的。

最后附镇站图

![坚强的鸡蛋](http://ccxcu.img43.wal8.com/img43/507748_20150118041318/142357281611.jpg)

